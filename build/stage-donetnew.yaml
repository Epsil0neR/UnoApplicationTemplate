jobs:
  - job: On_Windows_Dotnet_New
    pool:
      name : $(windowsAgent)
    steps:
    - task: UseDotNet@2
      displayName: 'Install .NET SDK'
      inputs:
        installationPath: '$(Agent.TempDirectory)/dotnet'
        useGlobalJson: true
        packageType: 'sdk'

    - script: dotnet nuget locals all --clear
      displayName: 'Clear nuget cache for previous installed template'

    - script: dotnet new install $(Build.SourcesDirectory)
      displayName: 'Install UnoApplicationTemplate'

    - script: dotnet new nv-mobile -n GeneratedApp
      displayName: 'Generate Project'

    - publish: GeneratedApp
      displayName: 'Publish GeneratedApp Folder'
      artifact: GeneratedApp
